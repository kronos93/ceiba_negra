!function(a){function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return a[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e=window.webpackJsonp;window.webpackJsonp=function(t,n,i){for(var r,s,c=0,l=[];c<t.length;c++)s=t[c],o[s]&&l.push(o[s][0]),o[s]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r]);for(e&&e(t,n,i);l.length;)l.shift()()};var n={},o={2:0};t.e=function(a){function e(){i.onerror=i.onload=null,clearTimeout(r);var t=o[a];0!==t&&(t&&t[1](new Error("Loading chunk "+a+" failed.")),o[a]=void 0)}if(0===o[a])return Promise.resolve();if(o[a])return o[a][2];var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.timeout=12e4,t.nc&&i.setAttribute("nonce",t.nc),i.src=t.p+""+a+".bundle.js";var r=setTimeout(e,12e4);i.onerror=i.onload=e;var s=new Promise(function(t,e){o[a]=[t,e]});return o[a][2]=s,n.appendChild(i),s},t.m=a,t.c=n,t.i=function(a){return a},t.d=function(a,e,n){t.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},t.p="http://localhost/ceiba_negra/assets/js/dist/",t.oe=function(a){throw console.error(a),a},t(t.s=16)}([function(a,t,e){a.exports={base_url:function(){return"http://"+window.location.hostname+"/ceiba_negra/"},multiplicar:function(){for(var a=$(".multiplicar"),t=1,e=0;e<a.length;e++)t*=$(a[e]).autoNumeric("get");return t},ajax_msg:{hidden:function(){$(".container-icons").find(".message").text().length>0&&($(".container-icons").slideUp(0),$(".container-icons").find(".message").text("")),this.clean_box()},show_error:function(a){this.clean_box(),$(".container-icons").addClass("container-icons showicon error").find("i").addClass("fa-times-circle-o");var t="Mensaje de error: "+a.responseText;t+="\nVerificar los datos ingresados con los registros existentes.",t+="\nCódigo de error: "+a.status+".",t+="\nMensaje de código error: "+a.statusText+".",this.set_msg(t),$("input[type='submit']").attr("disabled",!1).next().css("visibility","hidden")},show_success:function(a){this.clean_box(),$(".container-icons").addClass("container-icons showicon ok").find("i").addClass("fa-check-circle-o"),this.set_msg(a),$("input[type='submit']").attr("disabled",!1).next().css("visibility","hidden")},clean_box:function(){$(".container-icons").hasClass("showicon ok")?$(".container-icons").removeClass("showicon ok").find("i").removeClass("fa-check-circle-o"):$(".container-icons").hasClass("showicon error")&&$(".container-icons").removeClass("showicon error").find("i").removeClass("fa-times-circle-o")},set_msg:function(a){$(".container-icons").slideUp(0),$(".container-icons").find(".message").empty().html(a),$(".container-icons").slideDown(625)}}}},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(0),i=(e.n(o),function(){function a(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}()),r=function(){function a(t){n(this,a),this.data={},this.urls=t.urls,this.url="",this.msgs=t.msgs,this.msg="",this.frm=$(t.frm),this.btn=t.btn,this.append=t.append,void 0!==t.readonly&&(this.readonly=t.readonly),this.dtTable=t.dtTable,this.autoNumeric=t.autoNumeric,this.dtRow=this.btn.closest("tr").hasClass("parent")||this.btn.closest("tr").hasClass("child")?this.btn.closest("tr").prev("tr.parent"):this.btn.parents("tr"),this.parseDtRow=this.dtTable.row(this.dtRow).data(),console.log(this.parseDtRow),this.response,this.fnOnDone,this.on_submit()}return i(a,[{key:"add",value:function(){this.frm[0].reset(),this.data={},void 0!==this.readonly&&(this.readonly.status=!1,this.fnReadonly()),this.url=this.urls.add,this.msg=this.msgs.add,this.fnOnDone=this.ajaxAddDone}},{key:"edit",value:function(){this.data={},void 0!==this.readonly&&(this.readonly.status=!0,this.fnReadonly()),this.url=this.urls.edit,this.msg=this.msgs.edit,this.fnOnDone=this.ajaxEditDone;for(var a in this.parseDtRow)if($("#"+a).length){var t=$("#"+a);t.hasClass("autoNumeric")?t.autoNumeric("set",this.parseDtRow[a]):t.val(this.parseDtRow[a])}for(var a in this.append)this.data[this.append[a]]=this.parseDtRow[this.append[a]]}},{key:"fnReadonly",value:function(){$(this.readonly.inputs).attr("readonly",this.readonly.status)}},{key:"submit",value:function(){var a=this;$.ajax({url:e.i(o.base_url)()+a.url,type:"post",data:a.data,beforeSend:function(a){$("input[type='submit']").next().css("visibility","visible")}}).done(function(t){a.response=t,a.fnOnDone.apply(a)}).fail(function(a){o.ajax_msg.show_error(a)})}},{key:"ajaxAddDone",value:function(){this.frm[0].reset(),console.log(this.response);var a=this.dtTable.row.add(this.response[0]).draw(!1).node();$(a).animate({backgroundColor:"yellow"}),this.dtTable.order([0,"desc"]).draw(),o.ajax_msg.show_success(this.msg)}},{key:"ajaxEditDone",value:function(){for(var a in this.response[0])this.parseDtRow[a]=this.response[0][a];var t=this.dtTable.row(this.dtRow).data(this.parseDtRow).draw(!1).node();$(t).animate({backgroundColor:"yellow"}),o.ajax_msg.show_success(this.msg)}},{key:"on_submit",value:function(){var a=this;this.frm.off("submit").on("submit",function(t){t.preventDefault(),Object.assign(a.data,$(this).serializeObject());for(var e in a.autoNumeric)$("#"+a.autoNumeric[e]).length>0&&(a.data[a.autoNumeric[e]]=$("#"+a.autoNumeric[e]).autoNumeric("get"));a.submit()})}}]),a}();t.a=r},function(a,t){a.exports={autocompleteClientes:function(a){console.log(this),$("#clientes_autocomplete").autocomplete({serviceUrl:a()+"ajax/autocomplete_clientes",noCache:!0,autoSelectFirst:!0,onSelect:function(a){console.log(a);var t={first_name:"Default",last_name:"Default Default",email:"default@huertoslaceiba.com",phone:"99821234567",calle:"Default",no_ext:"100",no_int:"100",colonia:"Default",municipio:"Default",estado:"Default",ciudad:"Default",cp:"77777",lugar_nacimiento:"Default",fecha_nacimiento:"01-01-1999"},e={ciudad_expedicion:"Playa del Carmen",testigo_1:"XXXX XXXX XXXX",testigo_2:"XXXX XXXX XXXX"};for(var n in a)""!=a[n]&&null!=a[n]&&0!=a[n]||(a[n]=t[n]),$("#"+n).val(a[n]).trigger("input");for(var n in e)$("#"+n).val(e[n]);$("#id_cliente").val(a.id_cliente)},onSearchError:function(a,t,e,n){console.log("Ha ocurrido un error xhr.")},onInvalidateSelection:function(){console.log("Ha ocurrido un error en la selección.");var a={first_name:"Default",last_name:"Default Default",email:"default@huertoslaceiba.com",phone:"99821234567",calle:"Default",no_ext:"100",no_int:"100",colonia:"Default",municipio:"Default",estado:"Default",ciudad:"Default",cp:"77777s",lugar_nacimiento:"Default",fecha_nacimiento:"01-01-1999"},t={ciudad_expedicion:"Playa del Carmen",testigo_1:"XXXX XXXX XXXX",testigo_2:"XXXX XXXX XXXX"};for(var e in a)$("#"+e).val("");for(var e in t)$("#"+e).val("");$("#id_cliente").val("")}})},autocompleteLideres:function(a){$("#lideres_autocomplete").autocomplete({serviceUrl:a()+"ajax/autocomplete_lideres",noCache:!0,autoSelectFirst:!0,onSelect:function(a){$("#id_lider").val(a.id)},onSearchError:function(a,t,e,n){console.log("Ha ocurrido un error.")}})},datepicker:function a(){var a=$(".datepicker");a.mask("00-00-0000"),a.datepicker({dateFormat:"dd-mm-yy"}),""==a.val()&&a.datepicker("setDate",new Date)},format_numeric:function(a){$(".superficie").length&&$(".superficie").autoNumeric(a,{currencySymbol:" m²",currencySymbolPlacement:"s"}),$(".currency").length&&$(".currency").autoNumeric(a,{currencySymbol:"$"})},phone:function(){var a={onComplete:function(a){},onKeyPress:function(a,t,e,n){},onChange:function(a){},onInvalid:function(a,t,e,n,o){var i=n[0];console.log("Digit: ",i.v," is invalid for the position: ",i.p,". We expect something like: ",i.e)},reverse:!1};$(".phone").mask("(000) 000-0000",a)},number:function(){var a={onComplete:function(a){},onKeyPress:function(a,t,e,n){},onChange:function(a){},onInvalid:function(a,t,e,n,o){var i=n[0];console.log("Digit: ",i.v," is invalid for the position: ",i.p,". We expect something like: ",i.e)},reverse:!1};$(".number").mask("0#",a)}}},function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(4),o=e.n(n),i=e(0),r=(e.n(i),e(6)),s=(e.n(r),e(5)),c=(e(9),e(12),e(11),e(13),e(10));e.n(c),e(14),e(15);o()("#frm-venta").length&&e.e(0).then(function(a){e(18)}.bind(null,e)).catch(e.oe),(new s.a).get()},function(a,t){a.exports=jQuery},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(0),i=(e.n(o),e(2)),r=(e.n(i),function(){function a(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}()),s=function(){function a(){n(this,a);$("#shopCartSale").off("click").on("click",function(a){$(this).find(".my-dropdown").slideToggle("3500")})}return r(a,[{key:"get",value:function(){var a=this;$.get(e.i(o.base_url)()+"ajax/add_cart",function(t){a.templateCart(t)})}},{key:"delete",value:function(a){var t=this;$.ajax({url:e.i(o.base_url)()+"ajax/delete_cart/",data:{rowid:a},type:"post"}).done(function(a){t.templateCart(a)}).fail(function(a){})}},{key:"templateCart",value:function(a){var t=this;$("#shopCartSale").find("span").attr("data-venta",a.count);var n=document.getElementById("template-venta").innerHTML,r=Mustache.render(n,a);if(document.getElementById("listaVenta").innerHTML=r,e.i(i.format_numeric)("init"),$("#precio").length&&$("#enganche").length&&$("#abono").length){$("#precio").autoNumeric("set",a.total),$("#enganche").autoNumeric("set",a.enganche),$("#abono").autoNumeric("set",a.abono);var s=10;$("#porcentaje_comision").val(s),$("#comision").autoNumeric("set",s/100*$("#precio").autoNumeric("get"))}if(!a.count){var c=window.location.pathname,l=c.split("/");"venta"==l[l.length-1]&&(window.location.href=e.i(o.base_url)())}$(".itemCartDelete").off("click").on("click",function(a){var e=$(this).val();t.delete(e),a.stopPropagation()})}}]),a}();t.a=s},function(a,t,e){e(7),e(8)},function(a,t){$.extend(!0,$.fn.dataTable.defaults,{pagingType:"full_numbers",language:{url:"https://cdn.datatables.net/plug-ins/1.10.12/i18n/Spanish.json",decimal:".",thousands:","},responsive:!0,deferRender:!0,pageLength:25})},function(a,t){$.fn.serializeObject=function(){var a={},t=this.serializeArray();return $.each(t,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a}},function(a,t,e){"use strict";var n=e(0),o=(e.n(n),e(2));e.n(o);!function(){$("#mapplic").length&&e.e(1).then(function(a){e(17),console.log("dev");var t=$("#mapplic").mapplic({source:e.i(n.base_url)()+"ajax/get_mapa",sidebar:!0,minimap:!1,markers:!1,mapfill:!0,fillcolor:"",fullscreen:!0,developer:!0,zoom:!1,maxscale:2,smartip:!1,deeplinking:!1});$(t).on("locationopened",function(a,t){e.i(o.format_numeric)("init")})}.bind(null,e)).catch(e.oe)}()},function(a,t){var e=$("#historial-ventas-table").DataTable({responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate}},columns:[{data:"id_venta"},{data:"nombre_cliente"},{data:"retraso"},{data:"retrasados"},{data:"adelantados"},{data:"en_tiempo"},{data:"realizados"},{data:"descripcion"},{data:"precio"},{data:"comision"},{data:"abonado"},{data:"comisiones"},{data:"nombre_lider"},{data:"nombre_user"},{data:""}],columnDefs:[{targets:[],searchable:!1}],order:[[1,"asc"]]});$("#historial-ventas-table").on("click",".cancelar-venta",function(){pagoDtRow=$(this).closest("tr").hasClass("parent")||$(this).closest("tr").hasClass("child")?$(this).closest("tr").prev("tr.parent"):$(this).parents("tr");var a=e.row(pagoDtRow).data(),t={id_venta:a.id_venta};swal({title:"Cancelar venta",text:"Esta a punto de cancelar una venta, ¿Desea continuar?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,cancelButtonText:"CANCELAR"},function(){$.ajax({url:base_url()+"ajax/cancelar_venta/",data:t,type:"post"}).done(function(a){swal("¡Pago removido!")}).fail(function(a){})})}),$("#historial-ventas-table").on("click",".activar-venta",function(){pagoDtRow=$(this).closest("tr").hasClass("parent")||$(this).closest("tr").hasClass("child")?$(this).closest("tr").prev("tr.parent"):$(this).parents("tr");var a=e.row(pagoDtRow).data(),t={id_venta:a.id_venta};swal({title:"Cancelar venta",text:"Esta a punto de cancelar una venta, ¿Desea continuar?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,cancelButtonText:"CANCELAR"},function(){$.ajax({url:base_url()+"ajax/activar_venta/",data:t,type:"post"}).done(function(a){swal("¡Pago removido!")}).fail(function(a){})})}),$("#historial-ventas-table").on("click",".eliminar-venta",function(){pagoDtRow=$(this).closest("tr").hasClass("parent")||$(this).closest("tr").hasClass("child")?$(this).closest("tr").prev("tr.parent"):$(this).parents("tr");var a=e.row(pagoDtRow).data(),t={id_venta:a.id_venta};swal({title:"Cancelar venta",text:"Esta a punto de cancelar una venta, ¿Desea continuar?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,cancelButtonText:"CANCELAR"},function(){$.ajax({url:base_url()+"ajax/eliminar_venta/",data:t,type:"post"}).done(function(a){swal("¡Pago removido!")}).fail(function(a){})})}),$("#historial-ventas-table").on("click",".recuperar-venta",function(){pagoDtRow=this.btn.closest("tr").hasClass("parent")||this.btn.closest("tr").hasClass("child")?this.btn.closest("tr").prev("tr.parent"):this.btn.parents("tr");var a=e.row(pagoDtRow).data(),t={id_venta:a.id_venta};swal({title:"Cancelar venta",text:"Esta a punto de cancelar una venta, ¿Desea continuar?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,cancelButtonText:"CANCELAR"},function(){$.ajax({url:base_url()+"ajax/recuperar_venta/",data:t,type:"post"}).done(function(a){swal("¡Pago removido!")}).fail(function(a){})})}),$("[data-toggle=popover]").on("click",function(a){console.log(a);var t=a;$("[data-toggle=popover]").popover("hide"),$(this).popover({html:!0}).popover("show").on("shown.bs.popover",function(){t.stopPropagation(),$(".popover").attr("tabindex","10").on("click",function(a){a.stopPropagation()})}).on("hidden.bs.popover",function(){t.stopPropagation()}),t.stopPropagation()})},function(a,t,e){"use strict";var n=e(0),o=(e.n(n),e(1)),i=$("#huertos-table").DataTable({ajax:e.i(n.base_url)()+"ajax/get_huertos_pmz",columns:[{data:"id_huerto",type:"num"},{data:"manzana",render:$.fn.dataTable.render.number(",",".",0,"Mz. ",""),type:"num-fmt"},{data:"huerto",render:$.fn.dataTable.render.number(",",".",0,"Ht. ",""),type:"num-fmt"},{data:"superficie",render:$.fn.dataTable.render.number(",",".",2,""," m<sup>2</sup>"),type:"num-fmt"},{data:"precio_x_m2",render:$.fn.dataTable.render.number(",",".",2,"$"),type:"num-fmt"},{data:"precio",render:$.fn.dataTable.render.number(",",".",2,"$"),type:"num-fmt"},{data:"enganche",render:$.fn.dataTable.render.number(",",".",2,"$"),type:"num-fmt"},{data:"abono",render:$.fn.dataTable.render.number(",",".",2,"$"),type:"num-fmt"},{data:"vendido",render:function(a,t,e,n){return parseInt(a)?'<span class="label label-success">Vendido</span>':'<span class="label label-primary">No vendido</span>'}},{data:"col_norte"},{data:"col_noreste"},{data:"col_este"},{data:"col_sureste"},{data:"col_sur"},{data:"col_suroeste"},{data:"col_oeste"},{data:"col_noroeste"},{data:""}],columnDefs:[{targets:-1,data:null,defaultContent:'<button data-toggle="modal" data-title="Editar huerto" data-btn-type="edit" data-target="#huertoModal" class="btn btn-info btn-sm"><i class="fa fa-fw fa-pencil"></i></button>'},{sortable:!1,targets:[-1,-2,-3,-4,-5,-6,-7,-8,-9]},{targets:[-1,-2,-3,-4,-5],searchable:!1}],order:[[1,"asc"]]});$("#huertoModal").on("show.bs.modal",function(a){n.ajax_msg.hidden();var t=$(a.relatedTarget),e=t.data("title"),r=t.data("btnType");$(this).find(".model-title").html(e);var s={frm:"#frm-huerto",urls:{edit:"ajax/update_huerto",add:"ajax/add_huerto"},msgs:{edit:"Huerto actualizado correctamente.",add:"Huerto agregado correctamente."},autoNumeric:["superficie","precio_x_m2","precio"],append:["id_huerto"],btn:t,dtTable:i};new o.a(s)[r]()}),$(".multiplicar").on("keyup",function(){var a=e.i(n.multiplicar)();$("#precio").autoNumeric("set",a)})},function(a,t,e){"use strict";var n=e(0),o=(e.n(n),e(1)),i=$("#manzanas-table").DataTable({ajax:e.i(n.base_url)()+"ajax/get_manzanas",columns:[{data:"id_manzana",type:"num"},{data:"manzana",render:$.fn.dataTable.render.number(",",".",0,"Mz. ",""),type:"num-fmt"},{data:"calle"},{data:"superficie",render:$.fn.dataTable.render.number(",",".",2,""," m<sup>2</sup>"),type:"num-fmt"},{data:"disponibilidad",render:function(a,t,e,n){return parseInt(a)?'<span class="label label-success">Disponible</span>':'<span class="label label-primary">No disponible</span>'}},{data:"col_norte"},{data:"col_noreste"},{data:"col_este"},{data:"col_sureste"},{data:"col_sur"},{data:"col_suroeste"},{data:"col_oeste"},{data:"col_noroeste"},{data:""}],columnDefs:[{targets:-1,data:null,defaultContent:'<button data-toggle="modal" data-target="#manzanaModal" data-title="Editar manzana" data-btn-type="edit" class="btn btn-info btn-sm"><i class="fa fa-fw fa-pencil"></i></button>'},{sortable:!1,targets:[-1,-2,-3,-4,-5,-6,-7,-8,-9,-12]},{searchable:!1,targets:[-1]}],order:[[1,"asc"]]});$("#manzanaModal").on("show.bs.modal",function(a){n.ajax_msg.hidden();var t=$(a.relatedTarget),e=t.data("title"),r=t.data("btnType");$(this).find(".model-title").html(e);var s={frm:"#frm-manzana",urls:{edit:"ajax/update_manzana",add:"ajax/add_manzana"},msgs:{edit:"Manzana actualizada correctamente.",add:"Manzana agregada correctamente."},autoNumeric:["superficie"],readonly:{inputs:"#manzana"},append:["id_manzana"],btn:t,dtTable:i};new o.a(s)[r]()})},function(a,t,e){"use strict";var n=e(0),o=(e.n(n),e(1)),i=$("#opciones-de-ingreso-table").DataTable({ajax:e.i(n.base_url)()+"ajax/get_opciones_de_ingreso",columns:[{data:"id_opcion_ingreso"},{data:"nombre"},{data:"cuenta",render:function(a,t,e,n){return 0===parseInt(a)?"":a}},{data:"tarjeta",render:function(a,t,e,n){return 0===parseInt(a)?"":a}},{data:"ingreso",render:$.fn.dataTable.render.number(",",".",2,"$"),type:"num-fmt"},{data:"",render:function(a,t,e,n){var o='<a href="ingresos/'+e.id_opcion_ingreso+'" class="btn btn-info btn-sm"><i class="fa fa-fw fa-search"></i>Ver ingresos<a/>';return 1===e.id_opcion_ingreso||"CAJA"===e.nombre?o:'<button data-toggle="modal" data-title="Editar opción de ingreso" data-btn-type="edit" data-target="#opcionDeIngresoModal" class="btn btn-info btn-sm"><i class="fa fa-fw fa-pencil"></i></button> '+o}}],columnDefs:[{sortable:!1,targets:[1,5]}]});$("#opcionDeIngresoModal").on("show.bs.modal",function(a){n.ajax_msg.hidden();var t=$(a.relatedTarget),e=t.data("title"),r=t.data("btnType");$(this).find(".model-title").html(e);var s={frm:"#frm-opcion-ingreso",urls:{edit:"ajax/update_opcion_ingreso",add:"ajax/add_opcion_ingreso"},msgs:{edit:"Opción de ingreso actualizada correctamente.",add:"Opción de ingreso agregada correctamente."},autoNumeric:[],append:["id_opcion_ingreso"],btn:t,dtTable:i};new o.a(s)[r]()})},function(a,t,e){"use strict";var n,o=e(0),i=(e.n(o),e(1),$("#pagos-table").DataTable({responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate}},columns:[{data:"id_historial"},{data:"nombre_cliente"},{data:"nombre_lider"},{data:"concepto"},{data:"abono"},{data:"fecha"},{data:"estado"},{data:"detalles"},{data:"",render:function(a,t,e,n){return void 0==e.pago||parseFloat(e.pago)?void 0!=e.pago&&parseFloat(e.pago)>0?void 0==e.comision||parseFloat(e.comision)?e.is_admin?'<button class="btn btn-danger removerPago">Remover pago</button> ':"":e.is_admin?'<button class="btn btn-danger removerPago">Remover pago</button> <button class="btn btn-warning" data-toggle="modal" data-target="#pagoComisionModal">Registrar comisión</button>':'<button class="btn btn-warning" data-toggle="modal" data-target="#pagoComisionModal">Registrar comisión</button>':a:'<button class="btn btn-success" data-toggle="modal" data-target="#pagoModal">Registrar pago</button> '}}],columnDefs:[{targets:-1,data:null,defaultContent:""},{sortable:!1,targets:[1,2,3,4,5,6,7]},{targets:0,type:"num"}],order:[[0,"asc"]]})),r=0;$("#pagoModal").on("shown.bs.modal",function(a){var t=$(a.relatedTarget);n=$(t).parents("tr"),r=i.row(n).data().id_historial,$.ajax({url:e.i(o.base_url)()+"ajax/get_pagos/",data:{id_historial:r},type:"post"}).done(function(a){$("#pago").autoNumeric("set",a.abono),$("#id_lider").val(a.id_lider),$("#comision").autoNumeric("set",a.comision),$("#porcentaje_comision").val(a.porcentaje_comision),$("#penalizacion").autoNumeric("set",a.penalizacion),$("#porcentaje_penalizacion").val(a.porcentaje_penalizacion),$("#daysAccumulated").val(a.daysAccumulated)}).fail(function(a){})}),$("#frm-pago #porcentaje_comision").on("change keyup",function(){var a=$(this).val(),t=$("#frm-pago #pago").autoNumeric("get");$("#frm-pago #comision").autoNumeric("set",t*(a/100))}),$("#frm-pago #comision").on("keyup",function(){var a=$(this).autoNumeric("get"),t=$("#frm-pago #pago").autoNumeric("get");$("#frm-pago #porcentaje_comision").val((a/t*100).toFixed(2))}),$("#frm-pago #porcentaje_penalizacion").on("change keyup",function(){var a=$(this).val(),t=$("#frm-pago #pago").autoNumeric("get"),e=$("#daysAccumulated").val();$("#frm-pago #penalizacion").autoNumeric("set",t*(a/100)*e)}),$("#frm-pago #penalizacion").on("change keyup",function(){var a=$("#penalizacion").autoNumeric("get"),t=$("#frm-pago #pago").autoNumeric("get"),e=$("#daysAccumulated").val();$("#frm-pago #porcentaje_penalizacion").val((a/(t*e)*100).toFixed(2))}),$("#frm-pago").on("submit",function(a){a.preventDefault();var t=$(this).serializeObject();t.id_historial=r,t.pago=$("#pago").autoNumeric("get"),t.penalizacion=$("#penalizacion").autoNumeric("get"),t.comision=$("#comision").autoNumeric("get"),$.ajax({url:e.i(o.base_url)()+"ajax/pagar/",data:t,type:"post"}).done(function(a){$("#pagoModal").modal("hide");var t=i.row(n).data(a).draw(!1).node();$(t).animate({backgroundColor:"yellow"})}).fail(function(a){})}),$("#pagoComisionModal").on("shown.bs.modal",function(a){var t=$(a.relatedTarget);n=$(t).parents("tr"),r=i.row(n).data().id_historial,$.ajax({url:e.i(o.base_url)()+"ajax/get_comision/",data:{id_historial:r},type:"post"}).done(function(a){$("#pago2").autoNumeric("set",a.abono),$("#id_lider2").val(a.id_lider),$("#comision2").autoNumeric("set",a.comision),$("#porcentaje_comision2").val(a.porcentaje_comision)}).fail(function(a){})}),$("#porcentaje_comision2").on("change keyup",function(){var a=$(this).val(),t=$("#pago2").autoNumeric("get");$("#comision2").autoNumeric("set",t*(a/100))}),$("#frm-pago-comision").on("submit",function(a){a.preventDefault();var t=$(this).serializeObject();t.id_historial=r,t.pago=$("#pago2").autoNumeric("get"),t.comision=$("#comision2").autoNumeric("get"),$.ajax({url:e.i(o.base_url)()+"ajax/pagar_comision/",data:t,type:"post"}).done(function(a){$("#pagoComisionModal").modal("hide");var t=i.row(n).data(a).draw(!1).node();$(t).animate({backgroundColor:"yellow"})}).fail(function(a){})}),$("#pagos-table").on("click",".removerPago",function(){n=$(this).parents("tr");var a=i.row(n).data(),t={id_historial:a.id_historial};swal({title:"Remover pago",text:"Esta a punto de remover un pago, ¿Desea continuar?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,cancelButtonText:"CANCELAR"},function(){$.ajax({url:e.i(o.base_url)()+"ajax/remover_pago/",data:t,type:"post"}).done(function(a){var t=i.row(n).data(a).draw(!1).node();$(t).animate({backgroundColor:"yellow"}),swal("¡Pago removido!")}).fail(function(a){})})})},function(a,t,e){"use strict";var n=e(0),o=(e.n(n),e(1)),i=$("#users-table").DataTable({columns:[{data:"first_name"},{data:"last_name"},{data:"email"},{data:"phone"},{data:"groups"},{data:"btn_activar_desactivar"},{data:"btn_editar"}],columnDefs:[{sortable:!1,targets:[1,2,3,4,5]},{targets:[],searchable:!1}],order:[[0,"asc"]]});$("#userModal").on("shown.bs.modal",function(a){console.log($("#frm-ion-user")),n.ajax_msg.hidden();var t=$(a.relatedTarget),e=t.data("btnType"),r={frm:"#frm-ion-user",urls:{edit:"ajax/update_ion_user",add:"ajax/add_ion_user"},msgs:{edit:"Usuario actualizado correctamente.",add:"Usuario agregado correctamente."},btn:t,dtTable:i},s=new o.a(r);e&&(s.edit=function(){this.url=this.urls.edit,this.msg=this.msgs.edit,this.fnOnDone=this.ajaxEditDone},s[e]())}).on("hidden.bs.modal",function(){$(this).removeData("bs.modal")})},function(a,t,e){a.exports=e(3)}]);