webpackJsonp([13],{268:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(25),n=a(35),i=function(){function e(){o(this,e);$("#shopCartSale").off("click").on("click",function(e){$(this).find(".my-dropdown").slideToggle("3500")}),$("#shopCartSale").find("nav").off("click").on("click",function(e){e.stopPropagation()}),$(document).off("mouseup").on("mouseup",function(e){var t=$(".my-dropdown");t.is(e.target)||0!==t.has(e.target).length||t.hide()})}return l(e,[{key:"get",value:function(){var e=this;$.get((0,r.base_url)()+"ajax/add_cart",function(t){e.templateCart(t)})}},{key:"delete",value:function(e){var t=this;$.ajax({url:(0,r.base_url)()+"ajax/delete_cart/",data:{rowid:e},type:"post"}).done(function(e){t.templateCart(e)}).fail(function(e){})}},{key:"templateCart",value:function(e){var t=this;$("#shopCartSale").find("span").attr("data-venta",e.count);var a=document.getElementById("template-venta").innerHTML,o=Mustache.render(a,e);if(document.getElementById("listaVenta").innerHTML=o,(0,n.format_numeric)("init"),localStorage.setItem("precio",e.total),localStorage.setItem("enganche",e.enganche),localStorage.setItem("abono",e.abono),e.is_reserva?(localStorage.setItem("id_reserva",e.id_reserva),localStorage.setItem("id_lider",e.id_lider),localStorage.setItem("nombre_lider",e.nombre_lider),localStorage.setItem("nombre_cliente",e.nombre_cliente),localStorage.setItem("apellidos_cliente",e.apellidos_cliente),localStorage.setItem("email_cliente",e.email_cliente),localStorage.setItem("phone_cliente",e.phone_cliente),localStorage.setItem("comment",e.comment),localStorage.setItem("is_reserva",!0)):(localStorage.removeItem("id_reserva"),localStorage.removeItem("id_lider"),localStorage.removeItem("nombre_lider"),localStorage.removeItem("nombre_cliente"),localStorage.removeItem("apellidos_cliente"),localStorage.removeItem("email_cliente"),localStorage.removeItem("phone_cliente"),localStorage.removeItem("comment"),localStorage.setItem("is_reserva",!1)),$("#frm-venta #precio").length&&$("#frm-venta #enganche").length&&$("#frm-venta #abono").length&&$("#comision").length){$("#frm-venta #precio").autoNumeric("set",localStorage.getItem("precio")),$("#frm-venta #enganche").autoNumeric("set",localStorage.getItem("enganche")),$("#frm-venta #abono").autoNumeric("set",localStorage.getItem("abono"));var l=$("#porcentaje_comision").val();$("#frm-venta #comision").autoNumeric("set",l/100*$("#precio").autoNumeric("get")),e.is_reserva?($("#first_name").val(localStorage.getItem("nombre_cliente")),$("#last_name").val(localStorage.getItem("apellidos_cliente")),$("#id_lider").val(localStorage.getItem("id_lider")),$("#lideres_autocomplete").val(localStorage.getItem("nombre_lider")),$("#email").val(localStorage.getItem("email_cliente")),$("#phone").val(localStorage.getItem("phone_cliente")),localStorage.getItem("comment")?$("#comments").show().html(localStorage.getItem("comment")):$("#comments").hide().html(""),$("#id_reserva").val(localStorage.getItem("id_reserva"))):($("#first_name").val(""),$("#last_name").val(""),$("#id_lider").val(""),$("#lideres_autocomplete").val(""),$("#email").val(""),$("#phone").val(""),$("#comments").hide().empty(),$("#id_reserva").val(""))}else $("#frm-reserva #precio").length&&$("#frm-reserva #enganche").length&&$("#frm-reserva #abono").length&&($("#frm-reserva #precio").autoNumeric("set",localStorage.getItem("precio")),$("#frm-reserva #enganche").autoNumeric("set",localStorage.getItem("enganche")),$("#frm-reserva #abono").autoNumeric("set",localStorage.getItem("abono")));if(!e.count){var i=window.location.pathname,c=i.split("/"),m=c[c.length-1];"venta"!=m&&"reserva"!=m||(window.location.href=(0,r.base_url)())}$(".itemCartDelete").off("click").on("click",function(e){var a=$(this).val();t.delete(a),e.stopPropagation()})}}]),e}();t.default=i}});